pipeline {

	agent any
  
  stages {
   
    stage('Execute Jmeter') {

	    
	    steps {
              bat("dir")
              bat("jmeter -n -t sample.jmx -l Samplereport.jtl")
              step([$class: 'ArtifactArchiver', artifacts: '**/*.jtl'])
           
  
      	}
    }
  }
}

post {
        always {
            stage('Publish Performance Test Report') {
                steps {
                    // Publish HTML report
                    publishHTML(target: [
                        allowMissing: false,
                        alwaysLinkToLastBuild: true,
                        keepAll: true,
                        reportDir: 'C/New/html/report',
                        reportFiles: 'Samplereport.html'
                    ])
                }
            }
        }
    }
}
